<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Page</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        html, body {
            height: 100%;
            margin: 0;
            display: flex;
            flex-direction: column;
        }
        .content {
            flex: 1 0 auto;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .footer {
            flex-shrink: 0;
            background: #343a40;
            color: white;
            width: 100%;
            padding: 15px 10px;
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .navbar {
            background-color: #007bff;
        }
        .navbar-brand img {
            height: 40px;
            margin-right: 10px;
        }
        .navbar-nav .nav-link {
            color: white !important;
        }
        .carousel-inner {
            width: 100%;
            overflow: hidden;
        }
        .carousel-inner img {
            width: 100vw;
            height: 50vh;
            object-fit: cover;
        }
        body, html {
            overflow-x: hidden;
        }

        /* Chatbot Styling */
        #chatToggleButton {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 1050;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        #chatContainer {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 300px;
            height: 400px;
            display: none;
            flex-direction: column;
            border: 1px solid #ccc;
            background: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            z-index: 1050;
        }

        #chatbox {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }

        #userInputContainer {
            display: flex;
            align-items: center;
            padding: 10px;
            border-top: 1px solid #ccc;
        }

        #userInput {
            flex: 1;
            padding: 5px;
            margin-right: 5px;
        }

        #sendButton {
            padding: 5px 10px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .message {
            margin: 5px 0;
            padding: 5px;
            border-radius: 5px;
        }

        .message.user {
            background: #e3f2fd;
            text-align: right;
        }

        .message.bot {
            background: #f1f8e9;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <nav class="navbar navbar-expand-lg navbar-light">
        <a class="navbar-brand" href="#">
            <img src="https://banner2.cleanpng.com/20180513/jsw/kisspng-krishi-ghar-ict-in-agriculture-nepal-office-inf-5af8ba6a240d03.0189435615262500901477.jpg" alt="Logo"> KrushiMitra
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item"><a class="nav-link" href="home.html">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="datc.html">Data Collection</a></li>
                <li class="nav-item"><a class="nav-link" href="ferti_op.html">Recommendations</a></li>
                <li class="nav-item"><a class="nav-link" href="alert_op.html">Alerts</a></li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fas fa-cog"></i>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="action_plan.html">Action Plans</a>
                        <a class="dropdown-item" href="faq.html">FAQ's</a>
                        <a class="dropdown-item" href="aboutus.html">About Us</a>
                    </div>
                </li>
                <li class="nav-item"><a class="nav-link" href="#"><i class="fas fa-user"></i></a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="content">
        <div id="imageCarousel" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="https://www.fertilizerseurope.com/wp-content/uploads/2019/08/iStock-606230424-e1565796075821.jpg" alt="Image 1">
                </div>
                <div class="carousel-item">
                    <img src="https://farmersedge.ca/wp-content/uploads/2022/02/Fertilizer-Nitrogen-scaled.jpg" alt="Image 2">
                </div>
                <div class="carousel-item">
                    <img src="https://www.leisurepro.com/blog/wp-content/uploads/2020/04/shutterstock_437590984.jpg" alt="Image 3">
                </div>
            </div>
            <a class="carousel-control-prev" href="#imageCarousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#imageCarousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <span>Copyright &copy; 2024 KrushiMitra</span>
    </div>

    <!-- Chatbot -->
    <button id="chatToggleButton"><i class="fas fa-comments"></i></button>
    <div id="chatContainer">
        <div id="chatbox"></div>
        <div id="userInputContainer">
            <input type="text" id="userInput" placeholder="Type your query here..." />
            <button id="sendButton">Send</button>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            function adjustCarouselHeight() {
                var headerHeight = $('nav').outerHeight();
                var footerHeight = $('.footer').outerHeight();
                var windowHeight = $(window).height();
                var availableHeight = windowHeight - headerHeight - footerHeight;
                $('#imageCarousel .carousel-inner img').css('height', availableHeight);
            }

            adjustCarouselHeight();
            $(window).resize(function () {
                adjustCarouselHeight();
            });

            $('.carousel').carousel({
                interval: 3000
            });
        });

        const chatToggleButton = document.getElementById('chatToggleButton');
        const chatContainer = document.getElementById('chatContainer');
        const chatbox = document.getElementById('chatbox');
        const userInput = document.getElementById('userInput');
        const sendButton = document.getElementById('sendButton');

        const rules = {
            "hello": "Hi there! How can I assist you?",
            "how are you": "I'm great, thanks! How can I help you?",
            "bye": "Goodbye! Have a wonderful day!",
            "what fertilizer should i use?": "The choice depends on your crop type and soil condition...",
            "when should i apply fertilizer?": "Apply fertilizers during critical growth stages, such as sowing, flowering, and fruiting. Timing also depends on weather—avoid application before heavy rain to prevent nutrient runoff.",
            "how much fertilizer is needed?": "The quantity depends on the crop and soil condition. For example, wheat may require 100 kg of nitrogen per hectare, applied in splits. Use data from soil tests to avoid over-application.",
            "is my soil healthy?": "Healthy soil has balanced nutrients, proper pH, and good moisture levels. Conduct a soil test to check for deficiencies in nitrogen, phosphorus, or potassium.",
            "what’s the best mix for my crop?": "For crops like rice, a mix of 50kg nitrogen, 20kg phosphorus, and 20kg potassium per hectare is effective. Tailor this based on your soil test results.",
            "will rain affect my fertilizer?": "Yes, heavy rain can wash away applied fertilizers. It’s best to wait until after the rain to apply fertilizers to ensure they stay in the soil.",
            "should i use organic or synthetic fertilizer?": "Organic fertilizers improve long-term soil health, while synthetic fertilizers provide quick results. A combination of both often gives the best results.",
            "why is my crop yield low?": "Low yield may be due to insufficient or imbalanced nutrients, poor soil health, or improper irrigation. Check soil and crop data to identify specific issues.",
            "fertilizers details to grow wheat": "For wheat, use nitrogen-based fertilizers like urea. Apply 60% during sowing and 40% at the booting stage.",
            "fertilizers details to grow rice": "For rice, apply 50kg nitrogen, 20kg phosphorus, and 20kg potassium per hectare. Apply in split doses during planting and tillering stages.",
            "soil test": "A soil test is recommended before applying fertilizers to optimize usage and prevent over-fertilization.",
            "default": "I'm not sure I understand that. Please specify the crop type or ask about fertilizer usage."
        };

        chatToggleButton.addEventListener('click', () => {
            chatContainer.style.display = chatContainer.style.display === 'none' ? 'flex' : 'none';
        });

        sendButton.addEventListener('click', handleUserInput);
        userInput.addEventListener('keypress', (event) => {
            if (event.key === 'Enter') handleUserInput();
        });

        function handleUserInput() {
            const message = userInput.value.trim().toLowerCase();
            if (!message) return;
            addMessage("User", message, "user");
            userInput.value = "";
            const botReply = rules[message] || rules["default"];
            setTimeout(() => addMessage("Bot", botReply, "bot"), 500);
        }

        function addMessage(sender, message, className) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${className}`;
            messageDiv.textContent = `${sender}: ${message}`;
            chatbox.appendChild(messageDiv);
            chatbox.scrollTop = chatbox.scrollHeight;
        }
    </script>
</body>
</html>
